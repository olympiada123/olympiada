{% extends 'base.html' %}

{% block title %}–û–ª–∏–º–ø–∏–∞–¥—ã - –û–ª–∏–º–ø–∏–∞–¥–∞{% endblock %}

{% block content %}
<div class="container">
    <div class="about-page">
        <h1 class="about-page-title">–û–ª–∏–º–ø–∏–∞–¥—ã</h1>

        <section class="about-section">
            <div class="olympiads-intro">
                <p class="olympiads-intro-text">
                    {% if show_past %}
                    –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –æ–ª–∏–º–ø–∏–∞–¥. –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ—à–ª—ã—Ö –æ–ª–∏–º–ø–∏–∞–¥–∞—Ö.
                    {% else %}
                    –í—ã–±–µ—Ä–∏—Ç–µ –æ–ª–∏–º–ø–∏–∞–¥—É –¥–ª—è —É—á–∞—Å—Ç–∏—è. –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º, –¥–∞—Ç–∞–º–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏. 
                    –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –æ–ª–∏–º–ø–∏–∞–¥—ã –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Å—Ä–æ–∫–∏.
                    {% endif %}
                </p>
                <div class="olympiads-toggle">
                    <a href="{% url 'olympiads' %}" class="olympiads-toggle-btn {% if not show_past %}active{% endif %}">
                        –¢–µ–∫—É—â–∏–µ –æ–ª–∏–º–ø–∏–∞–¥—ã
                    </a>
                    <a href="?show_past=true" class="olympiads-toggle-btn {% if show_past %}active{% endif %}">
                        –ü—Ä–æ—à–ª—ã–µ –æ–ª–∏–º–ø–∏–∞–¥—ã
                    </a>
                </div>
            </div>
        </section>

        <section class="about-section">
            <div class="olympiads-filters">
                <div class="search-box">
                    <input 
                        type="text" 
                        id="olympiad-search" 
                        class="search-input" 
                        placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏—é..."
                    >
                    <span class="search-icon">üîç</span>
                </div>
                <div class="filters-row">
                    <div class="filter-group">
                        <label for="status-filter" class="filter-label">–°—Ç–∞—Ç—É—Å:</label>
                        <select id="status-filter" class="filter-select">
                            <option value="all">–í—Å–µ</option>
                            <option value="active">–ê–∫—Ç–∏–≤–Ω–∞</option>
                            <option value="upcoming">–°–∫–æ—Ä–æ</option>
                            <option value="finished">–ó–∞–≤–µ—Ä—à–µ–Ω–∞</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="subject-filter" class="filter-label">–ü—Ä–µ–¥–º–µ—Ç:</label>
                        <select id="subject-filter" class="filter-select">
                            <option value="all">–í—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã</option>
                            {% for subject in subjects %}
                            <option value="{{ subject.name|lower }}">{{ subject.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="sort-filter" class="filter-label">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
                        <select id="sort-filter" class="filter-select">
                            <option value="date-desc">–ü–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ)</option>
                            <option value="date-asc">–ü–æ –¥–∞—Ç–µ (—Å—Ç–∞—Ä—ã–µ)</option>
                            <option value="name-asc">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–ê-–Ø)</option>
                            <option value="name-desc">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–Ø-–ê)</option>
                        </select>
                    </div>
                    <button id="reset-filters" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å</button>
                </div>
            </div>
            <div class="olympiads-results-info">
                <span id="results-count">–ù–∞–π–¥–µ–Ω–æ: <strong>{{ olympiads|length }}</strong> –æ–ª–∏–º–ø–∏–∞–¥</span>
            </div>
            <div class="olympiads-container" id="olympiads-container">
                {% for item in olympiads %}
                <div class="olympiad-card" data-subjects="{% for subject in item.subjects_names %}{{ subject|lower }}{% if not forloop.last %},{% endif %}{% endfor %}" data-start-date="{{ item.olympiad.start_date|date:'Y-m-d' }}" data-status="{{ item.status }}">
                    <div class="olympiad-header">
                        <div class="olympiad-title-section">
                            <h2 class="olympiad-title">{{ item.olympiad.name }}</h2>
                            <span class="olympiad-status olympiad-status-{{ item.status }}">{{ item.status_display }}</span>
                        </div>
                    </div>
                    <div class="olympiad-content">
                        {% if item.olympiad.description %}
                        <p class="olympiad-description">
                            {{ item.olympiad.description }}
                        </p>
                        {% endif %}
                        <div class="olympiad-details">
                            <div class="olympiad-detail-item">
                                <span class="detail-icon">üìÖ</span>
                                <div class="detail-content">
                                    <span class="detail-label">–î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è:</span>
                                    <span class="detail-value">{{ item.olympiad.start_date|date:"d.m.Y" }} - {{ item.olympiad.end_date|date:"d.m.Y" }}</span>
                                </div>
                            </div>
                            <div class="olympiad-detail-item">
                                <span class="detail-icon">üìù</span>
                                <div class="detail-content">
                                    <span class="detail-label">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:</span>
                                    <span class="detail-value">{{ item.olympiad.registration_start|date:"d.m.Y" }} - {{ item.olympiad.registration_end|date:"d.m.Y" }}</span>
                                </div>
                            </div>
                            {% if item.subjects %}
                            <div class="olympiad-detail-item">
                                <span class="detail-icon">üìö</span>
                                <div class="detail-content">
                                    <span class="detail-label">–ü—Ä–µ–¥–º–µ—Ç—ã:</span>
                                    <span class="detail-value">{% for subject in item.subjects %}{{ subject.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</span>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                        <div class="olympiad-actions">
                            {% if item.registration_status == 'open' %}
                            <a href="{% url 'olympiad_detail' item.olympiad.id %}" class="btn btn-primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                            {% elif item.registration_status == 'not_started' %}
                            <span class="btn btn-secondary" style="cursor: default; opacity: 0.7;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–∫–æ—Ä–æ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è</span>
                            {% elif item.registration_status == 'closed' %}
                            <span class="btn btn-secondary" style="cursor: default; opacity: 0.7;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞</span>
                            {% endif %}
                            <a href="{% url 'olympiad_detail' item.olympiad.id %}" class="btn btn-secondary">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="olympiads-empty">
                    <p>–û–ª–∏–º–ø–∏–∞–¥—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                </div>
                {% endfor %}
            </div>
            <div class="pagination-container" id="pagination-container">
                <div class="pagination" id="pagination">
                    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>
        </section>
    </div>
</div>
{% endblock %}

{% block extra_js %}
{% load static %}
<script src="{% static 'js/olympiads.js' %}"></script>
{% endblock %}

